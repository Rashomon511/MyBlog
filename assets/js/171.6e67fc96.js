(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{255:function(a,s,e){"use strict";e.r(s);var t=e(0),n=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"dvaå…¥é—¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dvaå…¥é—¨","aria-hidden":"true"}},[a._v("#")]),a._v(" dvaå…¥é—¨")]),a._v(" "),e("blockquote",[e("p",[a._v("å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å°†è‡ªå·±å­¦ä¼šçš„çŸ¥è¯†å†è¡¨è¾¾å‡ºæ¥ï¼Œè‡ªå·±è™½ç„¶ç†è§£äº†è¿™å—çŸ¥è¯†ï¼Œä½†æ˜¯æ˜¯å¦èƒ½ç”¨è‡ªå·±çš„è¯å†è®²å‡ºæ¥ï¼Œ\né‚£åˆæ˜¯å¦å¤–ä¸€ç§å¢ƒåœ°ï¼Œåªæœ‰èƒ½è‡ªå·±è®²è¿°åæ‰ç®—å®Œæˆè½¬åŒ–ã€‚")])]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://juejin.im/post/5b920e4e6fb9a05d3827bc15",target:"_blank",rel:"noopener noreferrer"}},[a._v("ä¼ é€é—¨"),e("OutboundLink")],1)])]),a._v(" "),e("h2",{attrs:{id:"dvaæ˜¯ä»€ä¹ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dvaæ˜¯ä»€ä¹ˆ","aria-hidden":"true"}},[a._v("#")]),a._v(" dvaæ˜¯ä»€ä¹ˆ")]),a._v(" "),e("p",[a._v("dva æ˜¯é˜¿é‡Œä½“éªŒæŠ€æœ¯éƒ¨å¼€å‘çš„ React åº”ç”¨æ¡†æ¶ï¼Œå‘½åæ˜¯æ ¹æ®å®ˆæœ›å…ˆé”‹ä¸­çš„ä»»åŠ¡D.vaè€Œæ¥ã€‚ ä¸»è¦ç”¨äºè§£å†³ç»„ä»¶ä¹‹é—´çš„é€šè¡Œé—®é¢˜ï¼Œ\nåœ¨ä»¥å‰reacté¡¹ç›®ä¸­è§£å†³æ•°æ®æµé—®é¢˜ä¼šå¼•å…¥reduxï¼Œåˆç”±äºreduxæ²¡æœ‰å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥redux-sagaæˆ–redux-thunk,è¿™æ ·çš„ç¼ºç‚¹å°±æ˜¯\nå¼•å…¥å¤šä¸ªåº“ï¼Œè‡´ä½¿é¡¹ç›®ç»“æ„å¤æ‚ã€‚è€Œç°åœ¨ï¼š")]),a._v(" "),e("blockquote",[e("p",[a._v("dva = React-Router + Redux + Redux-saga")])]),a._v(" "),e("p",[a._v("å°†ä¸Šé¢ä¸‰ä¸ª React å·¥å…·åº“åŒ…è£…åœ¨ä¸€èµ·ï¼Œç®€åŒ–äº† APIï¼Œè®©å¼€å‘ React åº”ç”¨æ›´åŠ æ–¹ä¾¿å’Œå¿«æ·ã€‚")]),a._v(" "),e("ul",[e("li",[a._v("äº†è§£dvaä¹‹å‰å¯ä»¥å…ˆå»äº†è§£redux-saga.")])]),a._v(" "),e("p",[a._v("dvaçš„æœ€ç®€ç»“æ„ï¼š")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("import dva from 'dva';\nconst App = () => <div>Hello dva</div>;\n\n// åˆ›å»ºåº”ç”¨\nconst app = dva();\napp.model(model)\n// æ³¨å†Œè§†å›¾\napp.router(() => <App />);\n// å¯åŠ¨åº”ç”¨\napp.start('#root');\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("h2",{attrs:{id:"æ•°æ®æµå›¾"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®æµå›¾","aria-hidden":"true"}},[a._v("#")]),a._v(" æ•°æ®æµå›¾")]),a._v(" "),e("p",[e("img",{attrs:{src:"/img/dva/1.png",alt:""}})]),a._v(" "),e("h2",{attrs:{id:"æ ¸å¿ƒæ¦‚å¿µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒæ¦‚å¿µ","aria-hidden":"true"}},[a._v("#")]),a._v(" æ ¸å¿ƒæ¦‚å¿µ")]),a._v(" "),e("ul",[e("li",[a._v("Stateï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä¿å­˜æ•´ä¸ªåº”ç”¨çŠ¶æ€")]),a._v(" "),e("li",[a._v("Viewï¼šReact ç»„ä»¶æ„æˆçš„è§†å›¾å±‚")]),a._v(" "),e("li",[a._v("Actionï¼šä¸€ä¸ªå¯¹è±¡ï¼Œæè¿°äº‹ä»¶")]),a._v(" "),e("li",[a._v("connect æ–¹æ³•ï¼šä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° View")]),a._v(" "),e("li",[a._v("dispatch æ–¹æ³•ï¼šä¸€ä¸ªå‡½æ•°ï¼Œå‘é€ Action åˆ° State")])]),a._v(" "),e("h3",{attrs:{id:"stateå’Œview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stateå’Œview","aria-hidden":"true"}},[a._v("#")]),a._v(" stateå’Œview")]),a._v(" "),e("p",[a._v("stateæ˜¯ç”¨äºæ•°æ®å­˜å‚¨ä¿å­˜å…¨å±€çŠ¶æ€ã€‚viewæ˜¯reactç»„ä»¶æ„æˆçš„UIå±‚ï¼Œå½“stateå˜åŒ–æ—¶ä¼šè§¦å‘uiå±‚è§†å›¾çš„å˜åŒ–ã€‚")]),a._v(" "),e("h3",{attrs:{id:"actionå’Œdispatch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#actionå’Œdispatch","aria-hidden":"true"}},[a._v("#")]),a._v(" Actionå’Œdispatch")]),a._v(" "),e("p",[a._v("actionæ˜¯ç”¨äºæè¿°ä¸€ä¸ªäº‹ä»¶çš„ä¸€ä¸ªå¯¹è±¡")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("{\n    type: 'submit-form-data',\n    payload: formData\n}\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("dispatchåˆ™ç”¨æ¥å‘é€Actionåˆ°State")]),a._v(" "),e("h3",{attrs:{id:"connect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connect","aria-hidden":"true"}},[a._v("#")]),a._v(" connect")]),a._v(" "),e("p",[a._v("connect æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®š State åˆ° Viewï¼Œconnect æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œé€šå¸¸ç§°ä¸ºå®¹å™¨ç»„ä»¶ï¼Œæ˜¯ç”¨äºç”ŸæˆStateåˆ°Propçš„æ˜ å°„")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// ç¬¬ä¸€ç§å†™æ³•è¿™é‡Œä½¿ç”¨æ¥ä¿®é¥°å™¨@\n@connect((state) => {\n  return {\n    dept: state.dept,\n    version: state.version,\n  };\n})\n\n// ç¬¬äºŒç§å†™æ³•\nconnect(({ state}) => ({state}))(App);\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br")])]),e("h2",{attrs:{id:"model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#model","aria-hidden":"true"}},[a._v("#")]),a._v(" Model")]),a._v(" "),e("p",[a._v("dvaä¸­çš„modelæ˜¯æ‰€æœ‰çš„åº”ç”¨é€»è¾‘éƒ½å®šä¹‰åœ¨é‡Œé¢")]),a._v(" "),e("p",[a._v("modelçš„æ —å­ğŸŒ°ï¼š")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("export default {\n    namespace: 'modelName',\n    state: {\n      num: 0\n    }ï¼Œ\n    subscriptions: {\n      setup({dispatch,history}){\n        return history.listen(({pathname, query})=>{\n          dosomething....  \n        })\n      }\n    }\n    effects: {\n        *addAfter1Second({payload}, { call, put, select }) {\n          yield call(delay, 1000);\n          yield put({ type: 'add' , payload: 10});\n          const num =  yield select(state => state.modelNmae.num);\n          console.log(num)\n      },\n    },\n    reducers: {\n      add(state, action) { \n        return{\n          ...state,\n          num: action.payload\n        }\n      },\n  },\n}\n\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br")])]),e("p",[a._v("modelå¯¹è±¡çš„å±æ€§ç”±namespace,state, effect,reducers,subscriptionsç»„æˆã€‚")]),a._v(" "),e("h3",{attrs:{id:"namespaceå’Œstate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#namespaceå’Œstate","aria-hidden":"true"}},[a._v("#")]),a._v(" namespaceå’Œstate")]),a._v(" "),e("p",[a._v("namespaceå½“å‰ Model çš„åç§°ã€‚æ•´ä¸ªåº”ç”¨çš„ Stateï¼Œç”±å¤šä¸ªå°çš„ Model çš„ State ä»¥ namespace ä¸º key åˆæˆ,å½“åœ¨uiå±‚è§¦å‘å˜åŒ–æ—¶ï¼Œå¯ä»¥åˆ©ç”¨namespaceæ¥åŒºåˆ†è§¦å‘é‚£ä¸ªmodelçš„æ–¹æ³•ã€‚ä»è€Œæ”¹å˜state.")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("dispatch({\n  type: 'modelname/add',\n  payload: 10\n})\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("æ•°æ®ä¿å­˜åœ¨stateï¼Œç›´æ¥å†³å®šäº†è§†å›¾å±‚çš„è¾“å‡º.")]),a._v(" "),e("h3",{attrs:{id:"effectså’Œreducers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#effectså’Œreducers","aria-hidden":"true"}},[a._v("#")]),a._v(" effectså’Œreducers")]),a._v(" "),e("p",[a._v("effectså’Œreducerséƒ½æ˜¯actionçš„å¤„ç†å™¨ï¼Œä¸åŒçš„æ˜¯reducerså¤„ç†çš„æ˜¯åŒæ­¥çš„action,effectså¤„ç†çš„æ˜¯å¼‚æ­¥çš„action,effectsæ˜¯åŸºäº redux-sagaå®ç°ï¼Œeffectæ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œå†…éƒ¨ä½¿ç”¨yieldå…³é”®å­—ï¼Œæ ‡è¯†æ¯ä¸€æ­¥çš„æ“ä½œã€‚effectæä¾›äº†ä¾›å†…éƒ¨ä½¿ç”¨çš„ä¸‰ä¸ªæ–¹æ³•ã€‚")]),a._v(" "),e("ul",[e("li",[a._v("call: æ‰§è¡Œå¼‚æ­¥å‡½æ•°ï¼Œä¸€èˆ¬ç”¨äºè¯·æ±‚æ•°æ®")]),a._v(" "),e("li",[a._v("put: ç›¸å½“ä¸dispatchï¼Œå‘å‡ºä¸€ä¸ªaction,è§¦æ³•ä¸€ä¸ªåŒæ­¥çš„action")]),a._v(" "),e("li",[a._v("select: å¯ä»¥ç”¨äºè·å–å…¨å±€çš„çŠ¶æ€state")])]),a._v(" "),e("h3",{attrs:{id:"subscriptions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions","aria-hidden":"true"}},[a._v("#")]),a._v(" subscriptions")]),a._v(" "),e("p",[a._v("subscriptionsä¸€èˆ¬ç”¨äºç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå½“æ»¡è¶³æŸäº›è¦æ±‚æ—¶ï¼Œå¯ä»¥è§¦å‘ä¸€äº›äº‹ä»¶")])])}),[],!1,null,null,null);s.default=n.exports}}]);